<div style="padding: 20px;">
    
    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
        <h2 style="margin: 0; color: #333;">
            üìã Control de Asistencia - Segunda Quincena 
            <small style="font-size: 12px; color: #666;">(v2.1 - 17:58:23)</small>
        </h2>
        
        
        <div style="display: flex; gap: 10px;">
            <button id="guardar-asistencia" class="btn btn-success" style="padding: 8px 16px;">
                üíæ Guardar Asistencia
            </button>
            
            <button id="generar-reporte" class="btn btn-info" onclick="descargarReporteDirecto()" style="padding: 8px 16px;">
                üìä Generar Reporte
            </button>
        </div>
    </div>

    
    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
            
            <div>
                <label style="font-weight: bold; margin-right: 5px;">Estado/Zona:</label>
                <select id="estado-select" style="padding: 5px; min-width: 150px;">
                    <option value="todos" selected>Todos los Estados</option>
                                            <option value="Activo" >Activo</option>
                                            <option value="Inactivo" >Inactivo</option>
                                    </select>
            </div>
            
            
            <div>
                <label style="font-weight: bold; margin-right: 5px;">Mes:</label>
                <select id="mes-select" style="padding: 5px;">
                                                                <option value="1" >
                            Enero
                        </option>
                                            <option value="2" >
                            Febrero
                        </option>
                                            <option value="3" >
                            Marzo
                        </option>
                                            <option value="4" >
                            Abril
                        </option>
                                            <option value="5" >
                            Mayo
                        </option>
                                            <option value="6" >
                            Junio
                        </option>
                                            <option value="7" >
                            Julio
                        </option>
                                            <option value="8" >
                            Agosto
                        </option>
                                            <option value="9" >
                            Septiembre
                        </option>
                                            <option value="10" selected>
                            Octubre
                        </option>
                                            <option value="11" >
                            Noviembre
                        </option>
                                            <option value="12" >
                            Diciembre
                        </option>
                                    </select>
            </div>
            
            
            <div>
                <label style="font-weight: bold; margin-right: 5px;">A√±o:</label>
                <select id="a√±o-select" style="padding: 5px;">
                                            <option value="2023" >2023</option>
                                            <option value="2024" >2024</option>
                                            <option value="2025" selected>2025</option>
                                            <option value="2026" >2026</option>
                                    </select>
            </div>
            
            
            <div>
                <label style="font-weight: bold; margin-right: 5px;">Per√≠odo:</label>
                <select id="periodo-select" style="padding: 5px;">
                    <option value="primera_quincena" >
                        Primera Quincena (1-15)
                    </option>
                    <option value="segunda_quincena" selected>
                        Segunda Quincena (16-31)
                    </option>
                </select>
            </div>
            
            <button id="aplicar-filtros" class="btn btn-primary" style="padding: 8px 16px;">
                üîç Aplicar Filtros
            </button>
        </div>
    </div>

    
    <div style="background: #fff; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #ddd;">
        <h4 style="margin: 0 0 10px 0; color: #333;">üìå Leyenda de Estados:</h4>
        <div style="display: flex; flex-wrap: wrap; gap: 15px; font-size: 12px;">
                                        <div style="display: flex; align-items: center; gap: 5px;">
                    <span style="background: #28a745; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold;">
                        ‚úì
                    </span>
                    <span>Presente</span>
                </div>
                            <div style="display: flex; align-items: center; gap: 5px;">
                    <span style="background: #dc3545; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold;">
                        ‚úó
                    </span>
                    <span>Falta</span>
                </div>
                            <div style="display: flex; align-items: center; gap: 5px;">
                    <span style="background: #fd7e14; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold;">
                        PD
                    </span>
                    <span>Prima Dominical</span>
                </div>
                            <div style="display: flex; align-items: center; gap: 5px;">
                    <span style="background: #e83e8c; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold;">
                        B
                    </span>
                    <span>Bajas</span>
                </div>
                            <div style="display: flex; align-items: center; gap: 5px;">
                    <span style="background: #ffc107; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold;">
                        A
                    </span>
                    <span>Alta</span>
                </div>
                            <div style="display: flex; align-items: center; gap: 5px;">
                    <span style="background: #20c997; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold;">
                        I
                    </span>
                    <span>Incapacidad</span>
                </div>
                            <div style="display: flex; align-items: center; gap: 5px;">
                    <span style="background: #007bff; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold;">
                        P
                    </span>
                    <span>Pr√©stamo</span>
                </div>
                            <div style="display: flex; align-items: center; gap: 5px;">
                    <span style="background: #343a40; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold;">
                        V
                    </span>
                    <span>Vacante</span>
                </div>
                            <div style="display: flex; align-items: center; gap: 5px;">
                    <span style="background: #6f42c1; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold;">
                        VAC
                    </span>
                    <span>Vacaciones</span>
                </div>
                    </div>
    </div>

    
    <div style="background: #e8f4fd; padding: 10px; border-radius: 5px; margin-bottom: 20px; font-size: 14px;">
        <strong>üìÖ Per√≠odo actual:</strong> 
        D√≠as 16 al 31 
        de October 2025
        <br>
        <strong>üë• Total empleados mostrados:</strong> 7
            </div>

    
    <div style="overflow-x: auto; border: 1px solid #ddd; border-radius: 8px;">
        <table style="width: 100%; border-collapse: collapse; font-size: 12px;">
            <thead style="background: #447D9B; color: white; position: sticky; top: 0;">
                <tr>
                    <th style="padding: 10px; border: 1px solid #ddd; min-width: 200px;">Empleado</th>
                    <th style="padding: 10px; border: 1px solid #ddd; min-width: 150px;">Cliente</th>
                    <th style="padding: 10px; border: 1px solid #ddd; min-width: 120px;">Estado</th>
                    
                    
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            16
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            17
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            18
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            19
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            20
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            21
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            22
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            23
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            24
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            25
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            26
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            27
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            28
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            29
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            30
                        </th>
                                            <th style="padding: 5px; border: 1px solid #ddd; min-width: 40px; text-align: center;">
                            31
                        </th>
                                        
                    
                    <th style="padding: 10px; border: 1px solid #ddd; min-width: 100px;">Totales</th>
                    
                    
                    <th style="padding: 10px; border: 1px solid #ddd; min-width: 80px;">Bono</th>
                    <th style="padding: 10px; border: 1px solid #ddd; min-width: 80px;">Pr√©stamo</th>
                    <th style="padding: 10px; border: 1px solid #ddd; min-width: 80px;">Fonacot</th>
                    <th style="padding: 10px; border: 1px solid #ddd; min-width: 80px;">Finiquito</th>
                    <th style="padding: 10px; border: 1px solid #ddd; min-width: 200px;">Observaciones</th>
                </tr>
            </thead>
            <tbody>
                                                        <tr style="border-bottom: 1px solid #eee;">
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-weight: bold;">
                            Sharon Aranda Garcia
                        </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                                                            <span style="color: #dc3545;">Sin cliente asignado</span>
                                                    </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                            Coahuila
                        </td>
                        
                        
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="16"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 16, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 16, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="17"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 17, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 17, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="18"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 18, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 18, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="19"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 19, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 19, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia dia-actual" 
                                     data-empleado="4" 
                                     data-dia="20"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 20, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 20, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="21"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 21, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 21, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="22"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 22, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 22, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="23"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 23, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 23, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="24"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 24, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 24, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="25"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 25, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 25, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="26"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 26, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 26, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="27"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 27, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 27, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="28"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 28, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 28, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="29"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 29, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 29, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="30"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 30, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 30, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="4" 
                                     data-dia="31"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(4, 31, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 4, D√≠a: 31, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-size: 10px;">
                                                    </td>
                        
                        
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="bono"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="prestamo"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="fonacot"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="estatus_finiquito"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="text" 
                                   class="form-control financiero-input" 
                                   data-campo="observaciones"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 180px; font-size: 11px;" 
                                   maxlength="180"
                                   placeholder="Observaciones...">
                        </td>
                    </tr>
                                                        <tr style="border-bottom: 1px solid #eee;">
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-weight: bold;">
                            Ana Abigail Aranda L√≥pez
                        </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                                                            Espumil
                                                    </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                            Chiapas
                        </td>
                        
                        
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="16"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 16, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 16, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="17"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 17, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 17, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="18"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 18, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 18, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="19"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 19, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 19, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia dia-actual" 
                                     data-empleado="3" 
                                     data-dia="20"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 20, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 20, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="21"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 21, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 21, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="22"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 22, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 22, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="23"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 23, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 23, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="24"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 24, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 24, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="25"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 25, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 25, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="26"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 26, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 26, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="27"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 27, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 27, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="28"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 28, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 28, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="29"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 29, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 29, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="30"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 30, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 30, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="3" 
                                     data-dia="31"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(3, 31, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 3, D√≠a: 31, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-size: 10px;">
                                                    </td>
                        
                        
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="bono"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="prestamo"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="fonacot"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="estatus_finiquito"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="text" 
                                   class="form-control financiero-input" 
                                   data-campo="observaciones"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 180px; font-size: 11px;" 
                                   maxlength="180"
                                   placeholder="Observaciones...">
                        </td>
                    </tr>
                                                        <tr style="border-bottom: 1px solid #eee;">
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-weight: bold;">
                            Jorge Aranda Tellez
                        </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                                                            Espumil
                                                    </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                            Michoac√°n
                        </td>
                        
                        
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="16"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 16, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 16, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="17"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 17, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 17, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="18"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 18, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 18, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="19"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 19, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 19, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia dia-actual" 
                                     data-empleado="6" 
                                     data-dia="20"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 20, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 20, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="21"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 21, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 21, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="22"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 22, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 22, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="23"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 23, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 23, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="24"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 24, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 24, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="25"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 25, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 25, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="26"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 26, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 26, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="27"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 27, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 27, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="28"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 28, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 28, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="29"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 29, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 29, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="30"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 30, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 30, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="6" 
                                     data-dia="31"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(6, 31, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 6, D√≠a: 31, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-size: 10px;">
                                                    </td>
                        
                        
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="bono"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="prestamo"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="fonacot"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="estatus_finiquito"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="text" 
                                   class="form-control financiero-input" 
                                   data-campo="observaciones"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 180px; font-size: 11px;" 
                                   maxlength="180"
                                   placeholder="Observaciones...">
                        </td>
                    </tr>
                                                        <tr style="border-bottom: 1px solid #eee;">
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-weight: bold;">
                            Armando Garc√≠a Perez
                        </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                                                            Espumil
                                                    </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                            Coahuila
                        </td>
                        
                        
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="16"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 16, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 16, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="17"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 17, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 17, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="18"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 18, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 18, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="19"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 19, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 19, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia dia-actual" 
                                     data-empleado="5" 
                                     data-dia="20"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 20, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 20, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="21"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 21, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 21, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="22"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 22, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 22, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="23"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 23, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 23, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="24"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 24, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 24, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="25"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 25, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 25, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="26"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 26, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 26, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="27"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 27, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 27, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="28"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 28, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 28, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="29"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 29, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 29, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="30"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 30, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 30, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="5" 
                                     data-dia="31"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(5, 31, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 5, D√≠a: 31, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-size: 10px;">
                                                    </td>
                        
                        
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="bono"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="prestamo"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="fonacot"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="estatus_finiquito"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="text" 
                                   class="form-control financiero-input" 
                                   data-campo="observaciones"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 180px; font-size: 11px;" 
                                   maxlength="180"
                                   placeholder="Observaciones...">
                        </td>
                    </tr>
                                                        <tr style="border-bottom: 1px solid #eee;">
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-weight: bold;">
                            Elena Catalina Mart√≠nez Hernandez
                        </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                                                            <span style="color: #dc3545;">Sin cliente asignado</span>
                                                    </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                            Durango
                        </td>
                        
                        
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="16"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 16, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 16, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="17"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 17, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 17, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="18"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 18, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 18, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="19"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 19, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 19, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia dia-actual" 
                                     data-empleado="1" 
                                     data-dia="20"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 20, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 20, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="21"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 21, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 21, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="22"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 22, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 22, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="23"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 23, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 23, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="24"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 24, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 24, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="25"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 25, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 25, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="26"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 26, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 26, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="27"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 27, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 27, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="28"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 28, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 28, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="29"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 29, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 29, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="30"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 30, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 30, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="1" 
                                     data-dia="31"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(1, 31, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 1, D√≠a: 31, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-size: 10px;">
                                                    </td>
                        
                        
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="bono"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="prestamo"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="fonacot"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="estatus_finiquito"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="text" 
                                   class="form-control financiero-input" 
                                   data-campo="observaciones"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 180px; font-size: 11px;" 
                                   maxlength="180"
                                   placeholder="Observaciones...">
                        </td>
                    </tr>
                                                        <tr style="border-bottom: 1px solid #eee;">
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-weight: bold;">
                            Elena Catalina Mart√≠nez Hernandez
                        </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                                                            <span style="color: #dc3545;">Sin cliente asignado</span>
                                                    </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                            Durango
                        </td>
                        
                        
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="16"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 16, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 16, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="17"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 17, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 17, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="18"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 18, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 18, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="19"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 19, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 19, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia dia-actual" 
                                     data-empleado="2" 
                                     data-dia="20"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 20, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 20, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="21"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 21, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 21, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="22"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 22, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 22, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="23"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 23, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 23, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="24"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 24, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 24, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="25"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 25, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 25, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="26"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 26, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 26, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="27"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 27, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 27, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="28"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 28, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 28, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="29"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 29, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 29, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="30"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 30, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 30, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="2" 
                                     data-dia="31"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(2, 31, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 2, D√≠a: 31, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-size: 10px;">
                                                    </td>
                        
                        
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="bono"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="prestamo"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="fonacot"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="estatus_finiquito"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="text" 
                                   class="form-control financiero-input" 
                                   data-campo="observaciones"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 180px; font-size: 11px;" 
                                   maxlength="180"
                                   placeholder="Observaciones...">
                        </td>
                    </tr>
                                                        <tr style="border-bottom: 1px solid #eee;">
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-weight: bold;">
                            Mariana Sandoval Mendez
                        </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                                                            Espumil
                                                    </td>
                        <td style="padding: 8px; border: 1px solid #ddd;">
                            Michoac√°n
                        </td>
                        
                        
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="16"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 16, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 16, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="17"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 17, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 17, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="18"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 18, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 18, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="19"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 19, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 19, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia dia-actual" 
                                     data-empleado="7" 
                                     data-dia="20"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 20, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 20, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="21"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 21, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 21, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="22"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 22, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 22, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="23"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 23, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 23, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="24"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 24, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 24, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="25"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 25, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 25, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="26"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 26, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 26, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="27"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 27, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 27, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="28"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 28, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 28, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="29"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 29, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 29, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="30"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 30, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 30, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                                                <td style="padding: 2px; border: 1px solid #ddd; text-align: center;">
                                <div class="dia-asistencia " 
                                     data-empleado="7" 
                                     data-dia="31"
                                     data-asistencia-id="NO_ASISTENCIA"
                                     onclick="abrirModalEstadosDirecto(7, 31, 'NO_ASISTENCIA')"
                                     style="background: #f8f9fa; 
                                            color: #fff; 
                                            padding: 5px; 
                                            border-radius: 3px; 
                                            cursor: pointer; 
                                            cursor: pointer; 
                                            font-weight: bold;
                                            min-height: 25px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            user-select: none;
                                            position: relative;
                                            z-index: 1;"
                                     title="Click para seleccionar estado - Empleado: 7, D√≠a: 31, Asistencia: Sin crear">
                                    ?
                                </div>
                            </td>
                                                
                        
                        <td style="padding: 8px; border: 1px solid #ddd; font-size: 10px;">
                                                    </td>
                        
                        
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="bono"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="prestamo"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="fonacot"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="number" 
                                   class="form-control financiero-input" 
                                   data-campo="estatus_finiquito"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 70px; font-size: 11px;" 
                                   step="0.01" min="0">
                        </td>
                        <td style="padding: 4px; border: 1px solid #ddd;">
                            <input type="text" 
                                   class="form-control financiero-input" 
                                   data-campo="observaciones"
                                   data-asistencia-id=""
                                   value="" 
                                   style="width: 180px; font-size: 11px;" 
                                   maxlength="180"
                                   placeholder="Observaciones...">
                        </td>
                    </tr>
                            </tbody>
        </table>
    </div>
</div>


<div id="estadoModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
    <div style="background-color: #fefefe; margin: 10% auto; padding: 20px; border-radius: 8px; width: 80%; max-width: 600px; position: relative;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #ddd; padding-bottom: 10px;">
            <h3 style="margin: 0;">Seleccionar Estado de Asistencia</h3>
            <button id="cerrar-modal" onclick="cerrarModalDirecto()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #999;">&times;</button>
        </div>
        <div id="estado-buttons" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                            <button type="button" 
                        class="estado-btn" 
                        data-estado="presente"
                        onclick="seleccionarEstadoDirecto('presente')"
                        style="background: #28a745; 
                               color: #fff; 
                               border: none; 
                               padding: 10px; 
                               font-weight: bold;
                               border-radius: 5px;
                               cursor: pointer;
                               transition: all 0.2s;">
                    ‚úì Presente
                </button>
                            <button type="button" 
                        class="estado-btn" 
                        data-estado="falta"
                        onclick="seleccionarEstadoDirecto('falta')"
                        style="background: #dc3545; 
                               color: #fff; 
                               border: none; 
                               padding: 10px; 
                               font-weight: bold;
                               border-radius: 5px;
                               cursor: pointer;
                               transition: all 0.2s;">
                    ‚úó Falta
                </button>
                            <button type="button" 
                        class="estado-btn" 
                        data-estado="prima_dominical"
                        onclick="seleccionarEstadoDirecto('prima_dominical')"
                        style="background: #fd7e14; 
                               color: #fff; 
                               border: none; 
                               padding: 10px; 
                               font-weight: bold;
                               border-radius: 5px;
                               cursor: pointer;
                               transition: all 0.2s;">
                    PD Prima Dominical
                </button>
                            <button type="button" 
                        class="estado-btn" 
                        data-estado="bajas"
                        onclick="seleccionarEstadoDirecto('bajas')"
                        style="background: #e83e8c; 
                               color: #fff; 
                               border: none; 
                               padding: 10px; 
                               font-weight: bold;
                               border-radius: 5px;
                               cursor: pointer;
                               transition: all 0.2s;">
                    B Bajas
                </button>
                            <button type="button" 
                        class="estado-btn" 
                        data-estado="alta"
                        onclick="seleccionarEstadoDirecto('alta')"
                        style="background: #ffc107; 
                               color: #000; 
                               border: none; 
                               padding: 10px; 
                               font-weight: bold;
                               border-radius: 5px;
                               cursor: pointer;
                               transition: all 0.2s;">
                    A Alta
                </button>
                            <button type="button" 
                        class="estado-btn" 
                        data-estado="incapacidad"
                        onclick="seleccionarEstadoDirecto('incapacidad')"
                        style="background: #20c997; 
                               color: #fff; 
                               border: none; 
                               padding: 10px; 
                               font-weight: bold;
                               border-radius: 5px;
                               cursor: pointer;
                               transition: all 0.2s;">
                    I Incapacidad
                </button>
                            <button type="button" 
                        class="estado-btn" 
                        data-estado="prestamo"
                        onclick="seleccionarEstadoDirecto('prestamo')"
                        style="background: #007bff; 
                               color: #fff; 
                               border: none; 
                               padding: 10px; 
                               font-weight: bold;
                               border-radius: 5px;
                               cursor: pointer;
                               transition: all 0.2s;">
                    P Pr√©stamo
                </button>
                            <button type="button" 
                        class="estado-btn" 
                        data-estado="vacante"
                        onclick="seleccionarEstadoDirecto('vacante')"
                        style="background: #343a40; 
                               color: #fff; 
                               border: none; 
                               padding: 10px; 
                               font-weight: bold;
                               border-radius: 5px;
                               cursor: pointer;
                               transition: all 0.2s;">
                    V Vacante
                </button>
                            <button type="button" 
                        class="estado-btn" 
                        data-estado="vacaciones"
                        onclick="seleccionarEstadoDirecto('vacaciones')"
                        style="background: #6f42c1; 
                               color: #fff; 
                               border: none; 
                               padding: 10px; 
                               font-weight: bold;
                               border-radius: 5px;
                               cursor: pointer;
                               transition: all 0.2s;">
                    VAC Vacaciones
                </button>
                        <button type="button" 
                    class="estado-btn" 
                    data-estado=""
                    onclick="seleccionarEstadoDirecto('')"
                    style="background: #6c757d; 
                           color: #fff; 
                           border: none; 
                           padding: 10px; 
                           font-weight: bold;
                           border-radius: 5px;
                           cursor: pointer;
                           transition: all 0.2s;">
                üö´ Limpiar
            </button>
        </div>
    </div>
</div>


<div id="reporteModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
    <div style="background-color: #fefefe; margin: 5% auto; padding: 20px; border-radius: 8px; width: 90%; max-width: 500px; position: relative;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #ddd; padding-bottom: 10px;">
            <h3 style="margin: 0;">üìä Generar Reporte de Asistencia</h3>
            <button id="cerrar-reporte-modal" onclick="cerrarReporteModalDirecto()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #999;">&times;</button>
        </div>
        <form id="reporte-form">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">A√±o:</label>
                    <select name="a√±o" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                                    <option value="2023" >2023</option>
                                                    <option value="2024" >2024</option>
                                                    <option value="2025" selected>2025</option>
                                                    <option value="2026" >2026</option>
                                            </select>
                </div>
                <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Mes:</label>
                    <select name="mes" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                                                            <option value="1" >
                                Enero
                            </option>
                                                    <option value="2" >
                                Febrero
                            </option>
                                                    <option value="3" >
                                Marzo
                            </option>
                                                    <option value="4" >
                                Abril
                            </option>
                                                    <option value="5" >
                                Mayo
                            </option>
                                                    <option value="6" >
                                Junio
                            </option>
                                                    <option value="7" >
                                Julio
                            </option>
                                                    <option value="8" >
                                Agosto
                            </option>
                                                    <option value="9" >
                                Septiembre
                            </option>
                                                    <option value="10" selected>
                                Octubre
                            </option>
                                                    <option value="11" >
                                Noviembre
                            </option>
                                                    <option value="12" >
                                Diciembre
                            </option>
                                            </select>
                </div>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Per√≠odo:</label>
                    <select name="periodo" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="primera_quincena">Primera Quincena (1-15)</option>
                        <option value="segunda_quincena">Segunda Quincena (16-30/31)</option>
                    </select>
                </div>
                <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Estado:</label>
                    <select name="estado" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="todos">Todos los Estados</option>
                                                    <option value="Activo">Activo</option>
                                                    <option value="Inactivo">Inactivo</option>
                                            </select>
                </div>
            </div>
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 10px; font-weight: bold;">Formato:</label>
                <div>
                    <label style="margin-right: 20px; cursor: pointer;">
                        <input type="radio" name="formato" value="excel" checked style="margin-right: 5px;"> üìä Excel
                    </label>
                    <label style="cursor: pointer;">
                        <input type="radio" name="formato" value="pdf" style="margin-right: 5px;"> üìÑ PDF
                    </label>
                </div>
            </div>
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button type="button" id="cancelar-reporte" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;">Cancelar</button>
                <button type="button" id="descargar-reporte" onclick="descargarReporteConfirmado()" style="padding: 10px 20px; background: #17a2b8; color: white; border: none; border-radius: 4px; cursor: pointer;">üì• Descargar Reporte</button>
            </div>
        </form>
    </div>
</div>

<style>
.dia-asistencia:hover {
    opacity: 0.8;
    transform: scale(1.05);
}

.financiero-input {
    border: 1px solid #ddd;
    padding: 2px 4px;
    border-radius: 3px;
}

.financiero-input:focus {
    border-color: #007bff;
    outline: none;
}

.estado-btn:hover {
    opacity: 0.8;
    transform: scale(1.02);
}

/* Estilos para los modales */
#estadoModal, #reporteModal {
    animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

#estadoModal > div, #reporteModal > div {
    animation: slideIn 0.3s ease-in-out;
}

@keyframes slideIn {
    from { transform: translateY(-50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

/* Animaci√≥n para el d√≠a actual */
@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0.3; }
}

.dia-actual {
    animation: blink 2s infinite;
    border: 2px solid #007bff !important;
    box-shadow: 0 0 10px rgba(0, 123, 255, 0.5);
}
</style>

<script>
// ==================== FUNCIONES DIRECTAS ====================
function cerrarReporteModalDirecto() {
    console.log('üéØ Cerrando modal de reporte directamente...');
    const modal = document.getElementById('reporteModal');
    if (modal) {
        modal.style.display = 'none';
        console.log('‚úÖ Modal reporte cerrado');
    }
}

function descargarReporteConfirmado() {
    console.log('üìä Iniciando descarga de reporte...');
    
    const form = document.getElementById('reporte-form');
    if (!form) {
        console.error('‚ùå Formulario de reporte no encontrado');
        alert('Error: Formulario no encontrado');
        return;
    }
    
    const formData = new FormData(form);
    const params = new URLSearchParams(formData);
    
    console.log('üìÑ Par√°metros de reporte:', Object.fromEntries(formData));
    
    const downloadUrl = "http://localhost/Prestige/public/asistencia/exportar?" + params.toString();
    console.log('üîó URL de descarga:', downloadUrl);
    
    // Abrir en nueva ventana para descarga
    window.open(downloadUrl, '_blank');
    
    // Cerrar modal
    cerrarReporteModalDirecto();
}

function cerrarModalDirecto() {
    console.log('üéØ Cerrando modal directamente...');
    const modal = document.getElementById('estadoModal');
    if (modal) {
        modal.style.display = 'none';
        console.log('‚úÖ Modal cerrado');
    }
}

function seleccionarEstadoDirecto(estado) {
    console.log('üéØ Estado seleccionado:', estado);
    
    if (!window.empleadoActual || !window.diaActual) {
        console.error('‚ùå Datos de empleado/d√≠a no disponibles');
        alert('Error: Datos no disponibles. Cierra el modal e intenta de nuevo.');
        return;
    }
    
    // Mostrar indicador de carga
    const botones = document.querySelectorAll('.estado-btn');
    botones.forEach(btn => btn.disabled = true);
    
    // Enviar actualizaci√≥n con datos completos
    fetch("http://localhost/Prestige/public/asistencia/update", {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRF-TOKEN': 'FQDMdvPUSbCN5IZahz6jV4qtTtwXw9dDBkjDtk3R'
        },
        body: JSON.stringify({
            empleado_id: window.empleadoActual,
            a√±o: 2025,
            mes: 10,
            periodo: 'segunda_quincena',
            campo: 'dia_' + window.diaActual,
            valor: estado,
            crear_si_no_existe: true
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            console.log('‚úÖ Estado actualizado exitosamente');
            
            // Actualizar visualmente la casilla sin recargar
            const casilla = document.querySelector(`[data-empleado="${window.empleadoActual}"][data-dia="${window.diaActual}"]`);
            if (casilla) {
                // Obtener info del estado
                const estados = {
                    'presente': { color: '#28a745', icono: '‚úì' },
                    'falta': { color: '#dc3545', icono: '‚úó' },
                    'prima_dominical': { color: '#fd7e14', icono: 'PD' },
                    'bajas': { color: '#e83e8c', icono: 'B' },
                    'alta': { color: '#ffc107', icono: 'A' },
                    'incapacidad': { color: '#20c997', icono: 'I' },
                    'prestamo': { color: '#007bff', icono: 'P' },
                    'vacante': { color: '#343a40', icono: 'V' },
                    'vacaciones': { color: '#6f42c1', icono: 'VAC' }
                };
                
                const estadoInfo = estados[estado];
                if (estadoInfo) {
                    casilla.style.backgroundColor = estadoInfo.color;
                    casilla.style.color = 'white';
                    casilla.textContent = estadoInfo.icono;
                    
                    // Reconfigurar evento de la casilla actualizada
                    casilla.onclick = function() {
                        const empleadoId = this.getAttribute('data-empleado');
                        const dia = this.getAttribute('data-dia');
                        const asistenciaId = this.getAttribute('data-asistencia');
                        abrirModalEstadosDirecto(empleadoId, dia, asistenciaId);
                    };
                    
                    console.log('üì± Casilla actualizada visualmente y evento reconfigurado');
                }
            }
            
            cerrarModalDirecto();
            
            // Reactivar botones del modal para pr√≥ximo uso
            setTimeout(() => {
                const botones = document.querySelectorAll('.estado-btn');
                botones.forEach(btn => btn.disabled = false);
                console.log('üîÑ Botones del modal reactivados');
            }, 500);
        } else {
            console.error('‚ùå Error en actualizaci√≥n:', data.message);
            alert('Error: ' + data.message);
            // Reactivar botones
            botones.forEach(btn => btn.disabled = false);
        }
    })
    .catch(error => {
        console.error('‚ùå Error de red:', error);
        alert('Error de conexi√≥n. Intenta de nuevo.');
        // Reactivar botones
        botones.forEach(btn => btn.disabled = false);
    });
}

function aplicarFiltrosDirecto() {
    console.log('üéØ Aplicando filtros en la misma ventana...');
    
    const estado = document.getElementById('estado-select')?.value || 'todos';
    const a√±o = document.getElementById('a√±o-select')?.value || 2025;
    const mes = document.getElementById('mes-select')?.value || 10;
    const periodo = document.getElementById('periodo-select')?.value || 'primera_quincena';
    
    console.log('üìä Filtros:', {estado, a√±o, mes, periodo});
    
    // Mostrar indicador de carga
    const btnFiltros = document.getElementById('aplicar-filtros');
    if (btnFiltros) {
        btnFiltros.innerHTML = '‚è≥ Aplicando...';
        btnFiltros.disabled = true;
    }
    
    // Aplicar filtros usando AJAX sin cambiar de ventana
    const params = new URLSearchParams({
        estado: estado,
        a√±o: a√±o,
        mes: mes,
        periodo: periodo
    });
    
    console.log('üîÑ Cargando contenido con AJAX...');
    
    // Usar fetch para obtener contenido actualizado
    fetch("http://localhost/Prestige/public/asistencia?" + params.toString(), {
        method: 'GET',
        headers: {
            'X-Requested-With': 'XMLHttpRequest',
            'Accept': 'text/html'
        }
    })
    .then(response => response.text())
    .then(html => {
        console.log('üì• HTML recibido, parseando...');
        
        // Parsear el HTML recibido
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        
        // Buscar espec√≠ficamente la tabla de asistencia
        const nuevaTabla = doc.querySelector('table.table') || doc.querySelector('table');
        const tablaActual = document.querySelector('table.table') || document.querySelector('table');
        
        if (nuevaTabla && tablaActual) {
            console.log('üîÑ Reemplazando tabla...');
            // Reemplazar solo la tabla, conservando los filtros
            tablaActual.outerHTML = nuevaTabla.outerHTML;
            
            console.log('‚úÖ Tabla actualizada con filtros');
            
            // Reconfigurar eventos de las nuevas casillas
            configurarEventosCasillas();
            
            console.log('üéØ Eventos reconfigurados despu√©s de filtros');
        } else {
            console.warn('‚ö†Ô∏è No se pudo encontrar la tabla');
            console.log('Nueva tabla encontrada:', !!nuevaTabla);
            console.log('Tabla actual encontrada:', !!tablaActual);
            
            // Fallback: recargar p√°gina solo si es necesario
            console.log('üö® Fallback: redirigiendo...');
            window.location.href = "http://localhost/Prestige/public/asistencia?" + params.toString();
        }
        
        // Restaurar bot√≥n (que se conserva porque no se reemplaza)
        if (btnFiltros) {
            btnFiltros.innerHTML = 'üîç Aplicar Filtros';
            btnFiltros.disabled = false;
        }
    })
    .catch(error => {
        console.error('‚ùå Error en AJAX:', error);
        // Fallback: recargar p√°gina
        location.reload();
    });
}

function abrirModalEstadosDirecto(empleadoId, dia, asistenciaId) {
    console.log('üéØ Abriendo modal directo:', {empleadoId, dia, asistenciaId});
    
    // Configurar variables globales
    window.empleadoActual = empleadoId;
    window.diaActual = dia;
    window.asistenciaIdActual = asistenciaId;
    
    const modal = document.getElementById('estadoModal');
    if (modal) {
        modal.style.display = 'block';
        modal.style.zIndex = '9999';
        console.log('‚úÖ Modal abierto directamente');
    } else {
        console.error('‚ùå Modal no encontrado');
        alert('Error: No se puede abrir el modal. Refresca la p√°gina.');
    }
}

function descargarReporteDirecto() {
    console.log('üìä Descargando reporte directamente...');
    const reporteModal = document.getElementById('reporteModal');
    if (reporteModal) {
        reporteModal.style.display = 'block';
        reporteModal.style.zIndex = '9999';
        console.log('‚úÖ Modal reporte abierto');
    } else {
        console.error('‚ùå Modal reporte no encontrado');
    }
}

document.addEventListener('DOMContentLoaded', function() {
    console.log('üöÄ Asistencia JS iniciado'); // Debug inicial
    
    let empleadoActual, diaActual, asistenciaIdActual;

    // Elementos del DOM
    const estadoModal = document.getElementById('estadoModal');
    const reporteModal = document.getElementById('reporteModal');
    const cerrarModal = document.getElementById('cerrar-modal');
    const cerrarReporteModal = document.getElementById('cerrar-reporte-modal');
    const cancelarReporte = document.getElementById('cancelar-reporte');

    console.log('üìã Elementos encontrados:', {
        estadoModal: estadoModal ? 'S√≠' : 'No',
        reporteModal: reporteModal ? 'S√≠' : 'No',
        cerrarModal: cerrarModal ? 'S√≠' : 'No'
    });

    // ==================== FUNCIONES MODAL ====================
    function mostrarModal(modal) {
        if (!modal) {
            console.error('‚ùå Modal no proporcionado');
            return;
        }
        
        console.log('üéØ Mostrando modal:', modal.id);
        modal.style.display = 'block';
        modal.style.zIndex = '9999';
        document.body.style.overflow = 'hidden'; // Prevenir scroll
        
        // Verificar que se mostr√≥
        setTimeout(() => {
            if (modal.style.display === 'block') {
                console.log('‚úÖ Modal confirmado visible');
            } else {
                console.error('‚ùå Modal no se mostr√≥ correctamente');
            }
        }, 100);
    }

    function ocultarModal(modal) {
        if (!modal) {
            console.error('‚ùå Modal no proporcionado para ocultar');
            return;
        }
        
        console.log('üéØ Ocultando modal:', modal.id);
        modal.style.display = 'none';
        document.body.style.overflow = 'auto'; // Restaurar scroll
    }

    // Event listeners para cerrar modales
    cerrarModal?.addEventListener('click', () => ocultarModal(estadoModal));
    cerrarReporteModal?.addEventListener('click', () => ocultarModal(reporteModal));
    cancelarReporte?.addEventListener('click', () => ocultarModal(reporteModal));

    // Cerrar modal al hacer clic fuera
    window.addEventListener('click', function(event) {
        if (event.target === estadoModal) {
            ocultarModal(estadoModal);
        }
        if (event.target === reporteModal) {
            ocultarModal(reporteModal);
        }
    });

    // ==================== FILTROS ====================
    // Aplicar filtros - Versi√≥n simplificada y robusta
    function aplicarFiltros() {
        console.log('üéØ APLICANDO FILTROS - FUNCI√ìN LLAMADA');
        
        const estado = document.getElementById('estado-select')?.value || 'todos';
        const a√±o = document.getElementById('a√±o-select')?.value || 2025;
        const mes = document.getElementById('mes-select')?.value || 10;
        const periodo = document.getElementById('periodo-select')?.value || 'primera_quincena';
        
        console.log('ÔøΩ Valores obtenidos:', {estado, a√±o, mes, periodo});
        
        const url = "http://localhost/Prestige/public/asistencia?estado=" + encodeURIComponent(estado) + 
                   "&a√±o=" + encodeURIComponent(a√±o) + 
                   "&mes=" + encodeURIComponent(mes) + 
                   "&periodo=" + encodeURIComponent(periodo) +
                   "&_t=" + Date.now(); // Cache buster
        
        console.log('üîó URL final:', url);
        
        // Mostrar indicador de carga
        const btn = document.getElementById('aplicar-filtros');
        if (btn) {
            btn.innerHTML = '‚è≥ Aplicando...';
            btn.disabled = true;
        }
        
        window.location.href = url;
    }
    
    // Event listeners para el bot√≥n
    const btnFiltros = document.getElementById('aplicar-filtros');
    console.log('üîç Bot√≥n filtros encontrado:', btnFiltros ? 'S√ç' : 'NO');
    
    if (btnFiltros) {
        // M√∫ltiples event listeners para asegurar que funcione
        btnFiltros.onclick = function(e) {
            e.preventDefault();
            console.log('üéØ CLICK via onclick');
            aplicarFiltros();
        };
        
        btnFiltros.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('üéØ CLICK via addEventListener');
            aplicarFiltros();
        });
        
        btnFiltros.addEventListener('mousedown', function(e) {
            console.log('üéØ MOUSEDOWN detectado');
        });
    } else {
        console.error('‚ùå BOT√ìN NO ENCONTRADO');
        // Intentar con querySelector como respaldo
        const btnRespaldo = document.querySelector('[id="aplicar-filtros"]');
        console.log('üîÑ Bot√≥n respaldo:', btnRespaldo ? 'ENCONTRADO' : 'NO ENCONTRADO');
    }

    // ==================== CASILLAS DE D√çAS ====================
    // Funci√≥n para mostrar modal de estados
    function abrirModalEstados(empleadoId, dia, asistenciaId) {
        console.log('üéØ Abriendo modal para:', {empleadoId, dia, asistenciaId});
        
        empleadoActual = empleadoId;
        diaActual = dia;
        asistenciaIdActual = asistenciaId;
        
        const modal = document.getElementById('estadoModal');
        if (modal) {
            modal.style.display = 'block';
            console.log('‚úÖ Modal mostrado');
        } else {
            console.error('‚ùå Modal no encontrado');
            alert('Error: No se puede abrir el selector de estados');
        }
    }
    
    // Configurar clicks en casillas - M√©todo simplificado
    function configurarCasillas() {
        const casillas = document.querySelectorAll('.dia-asistencia');
        console.log('üîç Total casillas encontradas:', casillas.length);
        
        if (casillas.length === 0) {
            console.error('‚ùå NO SE ENCONTRARON CASILLAS');
            return;
        }
        
        casillas.forEach((casilla, index) => {
            const empleadoId = casilla.getAttribute('data-empleado');
            const dia = casilla.getAttribute('data-dia');
            const asistenciaId = casilla.getAttribute('data-asistencia-id');
            
            console.log(`Configurando casilla ${index + 1}:`, {empleadoId, dia, asistenciaId});
            
            // M√∫ltiples m√©todos de evento para garantizar funcionamiento
            casilla.onclick = function(e) {
                e.preventDefault();
                e.stopPropagation();
                console.log('üéØ CLICK via onclick en d√≠a:', dia);
                abrirModalEstados(empleadoId, dia, asistenciaId);
            };
            
            casilla.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                console.log('üéØ CLICK via addEventListener en d√≠a:', dia);
                abrirModalEstados(empleadoId, dia, asistenciaId);
            });
            
            // Visual feedback
            casilla.style.transition = 'all 0.2s ease';
            casilla.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.05)';
                this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.2)';
                console.log('üéØ Hover en d√≠a:', dia);
            });
            
            casilla.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
                this.style.boxShadow = 'none';
            });
        });
    }
    
    // Event delegation como respaldo absoluto
    document.addEventListener('click', function(e) {
        const elemento = e.target;
        if (elemento.classList.contains('dia-asistencia') || elemento.closest('.dia-asistencia')) {
            const casilla = elemento.classList.contains('dia-asistencia') ? elemento : elemento.closest('.dia-asistencia');
            
            e.preventDefault();
            e.stopPropagation();
            
            const empleadoId = casilla.getAttribute('data-empleado');
            const dia = casilla.getAttribute('data-dia');
            const asistenciaId = casilla.getAttribute('data-asistencia-id');
            
            console.log('üéØ CLICK DELEGADO en d√≠a:', dia);
            abrirModalEstados(empleadoId, dia, asistenciaId);
        }
    });
    
    // Ejecutar configuraci√≥n
    configurarCasillas();

    // Manejar selecci√≥n de estado
    document.querySelectorAll('.estado-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const estado = this.dataset.estado;
            
            console.log('Estado seleccionado:', estado); // Debug
            console.log('Datos actuales:', {empleadoActual, diaActual, asistenciaIdActual}); // Debug
            
            // Preparar datos para env√≠o
            const a√±o = document.getElementById('a√±o-select').value;
            const mes = document.getElementById('mes-select').value;
            const periodo = document.getElementById('periodo-select').value;
            
            // Llamar funci√≥n de actualizaci√≥n
            actualizarAsistenciaCompleta(empleadoActual, diaActual, estado, a√±o, mes, periodo, asistenciaIdActual);
            
            ocultarModal(estadoModal);
        });
    });

    // Funci√≥n unificada para actualizar asistencia
    function actualizarAsistenciaCompleta(empleadoId, dia, estado, a√±o, mes, periodo, asistenciaId) {
        console.log('Actualizando con datos:', {empleadoId, dia, estado, a√±o, mes, periodo, asistenciaId}); // Debug
        
        const payload = {
            empleado_id: empleadoId,
            a√±o: a√±o,
            mes: mes,
            periodo: periodo,
            campo: 'dia_' + dia,
            valor: estado,
            crear_si_no_existe: true
        };
        
        // Solo agregar asistencia_id si existe y no es 'NO_ASISTENCIA'
        if (asistenciaId && asistenciaId !== 'NO_ASISTENCIA') {
            payload.asistencia_id = asistenciaId;
        }
        
        fetch("http://localhost/Prestige/public/asistencia/update", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRF-TOKEN': 'FQDMdvPUSbCN5IZahz6jV4qtTtwXw9dDBkjDtk3R'
            },
            body: JSON.stringify(payload)
        })
        .then(response => response.json())
        .then(data => {
            console.log('Respuesta del servidor:', data); // Debug
            if (data.success) {
                location.reload();
            } else {
                alert('Error: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Error al actualizar asistencia');
        });
    }

    // Actualizar asistencia via AJAX
    function actualizarAsistencia(asistenciaId, campo, valor) {
        console.log('Actualizando:', {asistenciaId, campo, valor}); // Debug
        
        fetch("http://localhost/Prestige/public/asistencia/update", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRF-TOKEN': 'FQDMdvPUSbCN5IZahz6jV4qtTtwXw9dDBkjDtk3R'
            },
            body: JSON.stringify({
                asistencia_id: asistenciaId,
                campo: campo,
                valor: valor
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Recargar p√°gina para mostrar cambios
                location.reload();
            } else {
                alert('Error: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Error al actualizar asistencia');
        });
    }

    // Manejar campos financieros
    document.querySelectorAll('.financiero-input').forEach(input => {
        input.addEventListener('blur', function() {
            const asistenciaId = this.dataset.asistenciaId;
            const campo = this.dataset.campo;
            const valor = this.value;
            
            if (asistenciaId) {
                fetch("http://localhost/Prestige/public/asistencia/financiero", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRF-TOKEN': 'FQDMdvPUSbCN5IZahz6jV4qtTtwXw9dDBkjDtk3R'
                    },
                    body: JSON.stringify({
                        asistencia_id: asistenciaId,
                        [campo]: valor
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (!data.success) {
                        alert('Error: ' + data.message);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }
        });
    });

    // Guardar asistencia
    document.getElementById('guardar-asistencia').addEventListener('click', function() {
        fetch("http://localhost/Prestige/public/asistencia/guardar", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRF-TOKEN': 'FQDMdvPUSbCN5IZahz6jV4qtTtwXw9dDBkjDtk3R'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('‚úÖ Asistencia guardada correctamente');
            } else {
                alert('Error: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Error al guardar asistencia');
        });
    });

    // Generar reporte
    document.getElementById('generar-reporte')?.addEventListener('click', function() {
        mostrarModal(reporteModal);
    });

    // Descargar reporte
    document.getElementById('descargar-reporte')?.addEventListener('click', function() {
        const formData = new FormData(document.getElementById('reporte-form'));
        const params = new URLSearchParams(formData);
        
        window.open("http://localhost/Prestige/public/asistencia/exportar?" + params.toString(), '_blank');
        ocultarModal(reporteModal);
    });
    
    // ==================== FUNCIONES PARA RECONFIGURAR EVENTOS ====================
    function configurarEventosCasillas() {
        console.log('üîÑ Reconfigurando eventos de casillas despu√©s de AJAX...');
        
        // Reconfigurar eventos de casillas
        document.querySelectorAll('.dia-asistencia').forEach(casilla => {
            casilla.onclick = function() {
                const empleadoId = this.getAttribute('data-empleado');
                const dia = this.getAttribute('data-dia');
                const asistenciaId = this.getAttribute('data-asistencia');
                abrirModalEstadosDirecto(empleadoId, dia, asistenciaId);
            };
        });
        
        console.log('‚úÖ Eventos reconfigurados para', document.querySelectorAll('.dia-asistencia').length, 'casillas');
    }
    
    function configurarEventosFiltros() {
        console.log('üîÑ === CONFIGURANDO EVENTOS DE FILTROS ===');
        
        // Reconfigurar bot√≥n de filtros
        const botonFiltros = document.getElementById('aplicar-filtros');
        console.log('üîç Bot√≥n filtros encontrado:', !!botonFiltros);
        
        if (botonFiltros) {
            // Remover eventos anteriores
            botonFiltros.onclick = null;
            
            // Agregar nuevo evento
            botonFiltros.onclick = function(e) {
                e.preventDefault();
                console.log('üéØ CLICK EN FILTROS DETECTADO');
                aplicarFiltrosDirecto();
                return false;
            };
            
            console.log('‚úÖ Evento onclick asignado al bot√≥n filtros');
        } else {
            console.error('‚ùå No se encontr√≥ el bot√≥n aplicar-filtros');
        }
        
        // Reconfigurar bot√≥n de reporte
        const botonReporte = document.getElementById('generar-reporte');
        if (botonReporte) {
            botonReporte.onclick = function() {
                mostrarModal(reporteModal);
            };
        }
        
        console.log('‚úÖ Eventos de filtros reconfigurados');
    }

    // ==================== INICIALIZACI√ìN FINAL ====================
    
    // Configurar eventos de filtros al cargar la p√°gina
    configurarEventosFiltros();
    
    // Test de funci√≥n disponible globalmente
    window.testFiltros = function() {
        console.log('üß™ TEST DE FILTROS:');
        console.log('  - aplicarFiltrosDirecto existe:', typeof aplicarFiltrosDirecto);
        console.log('  - Bot√≥n filtros existe:', !!document.getElementById('aplicar-filtros'));
        aplicarFiltrosDirecto();
    };
    
    console.log('üèÅ ESTADO FINAL:');
    console.log('   - Casillas encontradas:', document.querySelectorAll('.dia-asistencia').length);
    console.log('   - Modal presente:', !!document.getElementById('estadoModal'));
    console.log('   - Bot√≥n filtros configurado:', !!document.getElementById('aplicar-filtros'));
    console.log('   - Test disponible: window.testFiltros()');
    console.log('‚úÖ INICIALIZACI√ìN COMPLETA - Listo para usar desde navegaci√≥n normal');
});
</script>